# 要件定義書

## 商品情報提示システムデモンストレーション

**対象特許:** 特開2021-033380（特許第6837635号）  

---

## 1. プロジェクト概要

### 1.1 目的

特許 JP-2021-033380 に基づく「商品情報提示システム」のデモンストレーション用Webアプリケーションを開発する。本システムは、ユーザが実店舗で見かけた商品を、店舗位置情報と商品IDを用いて簡単に検索・確認できるシステムの技術的優位性と実用性を示すことを目的とする。

### 1.2 特許技術の要約

本特許は、**店舗位置情報**と**商品ID（ロケーションコード）**を組み合わせることで、ユーザが実店舗で見かけた商品の情報を簡単にオンラインで取得できるシステムに関する。

#### 特許の基本構成

```text
┌──────────────┐         ┌──────────────────────┐         ┌──────────────┐
│  ユーザ端末   │────────▶│  商品情報提示用サーバ     │◀────────│   店舗端末    │
│ （スマホ等）  │◀────────│  （検索・提示エンジン）   │────────▶│  （POS等）    │
└──────────────┘         └──────────────────────┘         └──────────────┘
      │                         │
      │ 送信:                   │ 処理:
      │ ・店舗位置情報           │ ・店舗位置情報＋商品IDで検索
      │ ・商品ID                │ ・該当商品情報を抽出
      │                         │ ・商品情報をユーザ端末に返送
      │ 受信:                   │
      │ ・商品情報（名称,価格,   │ データ:
      │   画像,EC購入リンク等）  │ ・商品情報リスト
      │                         │ ・店舗位置データ
```

#### 特許請求の範囲（4項）

| 請求項 | 種別 | 概要 |
|--------|------|------|
| 請求項1 | システム | 商品情報提示用サーバとユーザ端末を備え、店舗位置情報および商品IDに基づいて該当商品情報を検索・送信するシステム |
| 請求項2 | 方法 | ユーザ端末から店舗位置情報・商品IDを送信し、サーバが商品情報リストから検索して結果を返す方法 |
| 請求項3 | サーバ | サーバ通信装置、サーバ記憶装置（商品情報リスト）、サーバ制御装置を備えた商品情報提示用サーバ |
| 請求項4 | プログラム | サーバ制御装置に上記処理を実行させるプログラム |

#### 特許の核心的価値

1. **ロケーション依存型短縮コード**: 位置情報と組み合わせることで、**1桁の数字だけでも**商品を特定可能
2. **語呂合わせ活用**: 数字IDを語呂合わせで覚えやすくし、ブランド認知と販促に活用可能
3. **ショールーミング対応**: 実店舗で見かけた商品をその場でEC購入へ誘導可能
4. **O2O（Online to Offline / Offline to Online）ブリッジ**: 実店舗とECの顧客体験をシームレスに接続
5. **低コスト導入**: 既存のスマートフォンとWebインフラで実装可能
6. **同一ID共存**: 1つの場所で同じIDが複数の店舗に存在する場合、エンドユーザーが選択する設計（特許記載準拠）

---

## 2. 特許範囲の明示

### 2.1 特許が保護する技術的範囲

本特許の保護範囲は以下の構成要素の組み合わせに基づくシステム全体に及ぶ：

| 構成要素 | 詳細 | 保護範囲 |
|----------|------|----------|
| **ユーザ端末** | スマートフォン、タブレット等のモバイル端末 | 店舗位置情報と商品IDの送信機能を持つ端末全般 |
| **商品情報提示用サーバ** | 商品情報リストを保持し、検索・返送を行うサーバ | クラウド、オンプレミス問わずサーバ処理全般 |
| **店舗位置情報** | GPS、Wi-Fi、ビーコン等による位置情報 | 位置特定手段を問わない |
| **商品ID** | ユーザが入力する商品識別コード | 桁数、形式を問わない |
| **商品情報リスト** | 店舗位置データと商品IDを含むデータベース | データ構造を問わない |
| **検索・提示処理** | 位置情報＋商品IDによる絞り込み検索 | アルゴリズムを問わない |

### 2.2 権利の範囲

- **国内特許**: 日本国特許第6837635号（有効・存続中）
- **国際出願**: PCT/JP2020/030880（国際展開の基盤）
- **権利の存続期間**: ～2039年8月16日
- **権利の効力**: 日本国内における製造、使用、販売、輸入等の独占的権利

### 2.3 実施許諾について

本デモンストレーションシステムは特許権者の許諾の下で開発されたものである。第三者が本特許技術を利用する場合は、特許権者からのライセンス取得が必要となる。

---

## 3. 機能導入による効果

### 3.1 導入企業にとっての効果

| 効果カテゴリ | 詳細 | 定量的期待値 |
|-------------|------|-------------|
| **売上向上** | 実店舗来店客のEC購入率向上 | EC売上 10-30%増 |
| **顧客体験改善** | 「見る→買う」までのステップ短縮 | 購入完了率 20-40%改善 |
| **在庫効率化** | 店舗在庫がなくてもEC在庫で対応 | 機会損失 30-50%削減 |
| **データ収集** | 店舗内行動データのデジタル化 | 顧客行動データ取得量 5-10倍 |
| **販促最適化** | 位置情報×商品興味のクロスデータ活用 | 広告ROI 15-25%改善 |
| **顧客囲い込み** | 自社ECへの誘導による他社EC流出防止 | 顧客離脱率 10-20%削減 |
| **オムニチャネル推進** | 実店舗とECの統合的な顧客管理 | LTV（顧客生涯価値）15-30%向上 |

### 3.2 消費者にとっての効果

- **利便性向上**: 店舗で見かけた商品をその場で即座に情報取得・購入可能
- **比較購買**: 複数ECサイトの価格・在庫を一括比較
- **購入機会拡大**: 店舗に在庫がない商品もECで購入可能
- **情報の正確性**: 位置情報ベースのため、確実に「その店舗の、その商品」の情報を取得

### 3.3 市場全体への効果

- **O2O市場の活性化**: 実店舗とECの共存モデルの確立
- **ショールーミングの正の転換**: 実店舗の価値を再定義し、来店動機の創出
- **地域経済活性化**: 地方店舗のEC展開を低コストで実現

---

## 4. 活用価値のある企業・業種

### 4.1 主要ターゲット企業

| カテゴリ | 対象企業例 | 活用メリット |
|---------|-----------|-------------|
| **大企業（製造業）** | トヨタ、ソニー、パナソニック等 | ショールーム×EC連携、直販チャネル強化 |
| **総合商社** | 三菱商事、伊藤忠、三井物産等 | グループ小売事業のDX、プラットフォーム展開 |
| **プラットフォーマー** | 楽天、Yahoo!、Amazon等 | 実店舗連携による新規ユーザー獲得 |
| **小売（実店舗+EC）** | イオン、セブン&アイ、ユニクロ等 | オムニチャネル戦略の核心技術 |
| **コンビニエンスストア** | セブンイレブン、ファミリーマート、ローソン | 限定商品のEC展開、棚割最適化 |
| **百貨店** | 三越伊勢丹、高島屋、大丸松坂屋 | 高額商品の「見てから買う」体験強化 |
| **家電量販店** | ヨドバシ、ビックカメラ、ヤマダ電機 | ショールーミング対策の決定版 |
| **アパレル** | ZARA、H&M、ユニクロ、しまむら | 試着→EC購入フローの確立 |
| **ドラッグストア** | マツモトキヨシ、ウエルシア、サンドラッグ | 定期購入EC誘導、リピート率向上 |
| **ホームセンター** | カインズ、コーナン、コメリ | 大型商品のEC配送連携 |
| **食品スーパー** | ライフ、イトーヨーカドー、オーケー | ネットスーパー連携、まとめ買い促進 |
| **不動産** | 三井不動産、住友不動産、野村不動産 | モデルルーム→オンライン相談連携 |
| **自動車ディーラー** | トヨタ、ホンダ、日産各ディーラー | 試乗→オンライン見積・購入連携 |
| **通信キャリア** | NTTドコモ、au、ソフトバンク | 店舗来店客のオンライン契約促進 |
| **飲食チェーン** | マクドナルド、スターバックス、すき家 | 物販商品（グッズ・食品）のEC誘導 |
| **書店** | 紀伊國屋、丸善ジュンク堂、TSUTAYA | 在庫切れ書籍のEC購入、電子書籍連携 |
| **スポーツ用品** | アルペン、ゼビオ、デカトロン | 試着・試用→EC購入フロー |
| **化粧品** | 資生堂、コーセー、花王 | 店頭カウンセリング→EC定期購入 |
| **旅行代理店** | JTB、HIS、近畿日本ツーリスト | 店頭相談→オンライン予約連携 |
| **銀行・金融** | 三菱UFJ、三井住友、みずほ | 窓口相談→オンライン申込連携 |
| **物流企業** | ヤマト運輸、佐川急便、日本郵便 | 宅配ロッカー×EC連携 |
| **農産物直売所** | JA各組合、道の駅 | 地方特産品のEC全国展開 |
| **展示会・イベント** | 東京ビッグサイト、幕張メッセ | 展示品→EC購入の即時連携 |
| **美術館・博物館** | 国立美術館、各地博物館 | ミュージアムショップ×ECの連携 |
| **テーマパーク** | ディズニー、USJ | パーク内グッズ→EC購入・配送 |
| **免税店** | DFS、空港免税店 | インバウンド客のEC再購入促進 |
| **BtoB卸売** | MonotaRO、ミスミ、ASKUL | 現場確認→オンライン発注連携 |

---

## 5. システム要件

### 5.1 技術スタック

| 項目 | 技術 | 備考 |
|------|------|------|
| **言語** | TypeScript | フロントエンド・ビルド全体 |
| **フレームワーク** | React（Vite） | SPA構成 |
| **地図** | Google Maps JavaScript API | 位置選択・多角形エリア描画 |
| **地図ライブラリ** | @react-google-maps/api | React向けGoogle Mapsラッパー |
| **UI** | CSS Modules / TailwindCSS | レスポンシブ対応 |
| **ホスティング** | Firebase Hosting | 静的サイトホスティング |
| **ビルド** | Vite | 高速ビルド |
| **データベース** | 不要 | コード内ハードコーディング |
| **スライド** | Reveal.js or カスタムHTML | Webスライド |

### 5.2 動作環境

| 項目 | 要件 |
|------|------|
| **対応ブラウザ** | Chrome, Firefox, Safari, Edge（最新版） |
| **対応デバイス** | PC, タブレット, スマートフォン |
| **デモ画面推奨デバイス** | PC またはタブレット（横並び2パネルで最適表示） |
| **レスポンシブ** | 対応必須（スマホ閲覧時は縦レイアウトに自動切替） |
| **通信** | HTTPS（Firebase Hosting標準） |

### 5.3 非機能要件

| 項目 | 要件 |
|------|------|
| **パフォーマンス** | 初回読み込み 3秒以内 |
| **可用性** | Firebase Hosting SLA準拠 |
| **セキュリティ** | HTTPS通信、XSS対策 |
| **保守性** | TypeScript型安全性、コンポーネント分離 |

---

## 6. 機能要件

### 6.1 トップページ

トップページには以下の要素を配置する：

#### 6.1.1 ヘッダーセクション
- システム名称「商品情報提示システム（ロケーションコード）」
- 特許番号の表示：特開2021-033380（特許第6837635号）
- ナビゲーションメニュー

#### 6.1.2 特許技術の要約セクション
- 特許の概要説明（図解付き）
- システム構成図
- 技術的特徴の箇条書き

#### 6.1.3 機能アピールセクション
- 本システムの主要機能と優位性
- 競合技術との差別化ポイント
- ユースケースのビジュアル説明

#### 6.1.4 機能導入による効果セクション
- 定量的な導入効果（売上向上、コスト削減等）
- 導入企業の業務改善事例
- ROI見込み

#### 6.1.5 特許範囲の明示セクション
- 請求項の要約
- 保護される技術的範囲
- ライセンス情報

#### 6.1.6 デモパターン一覧セクション
- 30パターンのデモリンク一覧
- カテゴリフィルター（用途別、規模別、エリア別、ID桁数別）
- 各パターンの概要説明

#### 6.1.7 Webスライドリンクセクション
- プレゼンテーション資料へのリンク
- スライド内容の概要

#### 6.1.8 活用価値のある企業セクション
- ターゲット企業カテゴリ一覧
- 各カテゴリの活用メリット

#### 6.1.9 フッター
- 特許情報
- 著作権表示
- J-PlatPatリンク

### 6.2 デモ画面

デモ画面は **2パネル構成**（左: Google Mapパネル / 右: エンドユーザースマホ画面）で構成する。  
**デモ画面はPC またはタブレットでの閲覧を推奨する**。スマートフォンで閲覧する場合は縦レイアウトに自動切替する。

#### 6.2.1 全体レイアウト（2パネル構成）

デモ画面は横並び2分割レイアウトとし、以下の構成とする：

| パネル | 幅比率（PC/タブレット） | 役割 |
|--------|------------------------|------|
| **左パネル: Google Mapビュー** | 60% | 管理者・俯瞰視点。位置情報多角形エリアの可視化、エンドユーザー位置の選択 |
| **右パネル: エンドユーザースマホ画面** | 40% | エンドユーザー体験のシミュレーション。ID入力→商品表示 |

##### デバイス別レイアウト

| デバイス | ブレークポイント | レイアウト | パネル比率 | 備考 |
|---------|-----------------|-----------|-----------|------|
| **PC** | 1024px以上 | 横並び2パネル | 左60% / 右40% | 推奨閲覧環境。2パネルによる対比が最も効果的 |
| **タブレット** | 768px〜1023px | 横並び2パネル | 左55% / 右45% | 横向き推奨。スマホフレームのサイズを調整 |
| **スマートフォン** | 767px以下 | **縦積みレイアウト** | 上下100% | 上: Google Map / 下: スマホ画面（フレームなし） |

##### スマートフォン縦レイアウト仕様

スマートフォンでデモ画面を閲覧する場合、以下のレイアウトに自動切替する：

- **上部: Google Mapビュー**（高さ: 画面の40%、最小200px）
  - タッチ操作で位置選択可能
  - 多角形エリアは通常通り表示
  - 凡例はコンパクト表示（折りたたみ式）
- **下部: エンドユーザー操作画面**（高さ: 画面の60%）
  - スマホフレーム装飾は非表示（実機で閲覧しているため不要）
  - ID入力・商品表示の機能はそのまま維持
  - サンプルIDタップ入力もそのまま利用可能
- **切替ヒント**: 画面上部に「PC/タブレットでの閲覧を推奨します」のバナーを表示（非表示可能）

#### 6.2.2 左パネル: Google Mapビュー

Google Maps JavaScript APIを使用し、以下の要素を地図上に表示する。

##### エンドユーザー位置選択
- **地図クリックによる位置選択**: ユーザがマップ上の任意の地点をクリックしてエンドユーザーの現在地を設定
- **位置マーカー表示**: 選択された位置にピンマーカーを表示
- **座標表示**: 選択された位置の緯度・経度を画面上に表示
- **初期表示**: デモパターンに応じた適切な中心座標・ズームレベルで初期表示

##### 位置情報多角形エリアの重層的重複表示

特許の核心である「店舗位置情報による商品ID絞り込み」を視覚化するため、各店舗の各IDに対応する**多角形エリア（Polygon）**を地図上に重層的に描画する。

> **重要**: 多角形エリアとIDは**重層的に重複する構造**であり、必ずしも入れ子（ネスト）にはならない。異なる店舗のエリアが一部重複したり、同じ店舗内の異なるIDエリアが交差・部分重複したりする。これが本特許の実際の運用形態である。

- **多角形エリアの定義**: 各店舗がカバーする地理的範囲を多角形（Polygon）で定義
- **IDごとの重層化**: 各IDの有効エリアは独立した多角形であり、**入れ子とは限らず**、交差・部分重複・完全独立があり得る
- **色分け**: 店舗ごとに異なるベース色を使用し、IDエリアごとに透明度を変えて重層表示
- **凡例表示**: どの色・エリアがどの店舗・IDに対応するかの凡例を表示
- **クリックインタラクション**: 多角形エリアをクリックすると、対応する店舗・ID情報をポップアップ表示
- **表示切替**: チェックボックスで各レイヤーの表示/非表示を切替可能

##### 多角形エリアの重層的重複構造

多角形エリアは「入れ子」構造ではなく、**自由に重複・交差・独立する**構造である。

```
┌──────────────────────────────────────────────────────────┐
│                                                          │
│   ┌── 店舗A エリア（赤系） ────────────────┐        │
│   │                                        │        │
│   │   ┌── ID:1 エリア ──────────┐       │        │
│   │   │                            │       │        │
│   │   │    ┌── ID:29 エリア ──┐───────┘        │
│   │   │    │                 │   │ ← 部分重複     │
│   │   └────┴─────            │   │              │
│   │        │                 │   │              │
│   │        └─────────────────┘   │              │
│   └───────────────────────────────────────┘              │
│                                                          │
│         ┌── 店舗B エリア（青系） ─────────┐            │
│         │                                   │            │
│   ─────┼── 重複エリア ── ID:5 ─────── │ ← 店舗AとB   │
│         │    のエリアが重複              │   の同一ID  │
│         │                                   │            │
│         │   ┌─ ID:5 エリア（店舗B） ──┐   │            │
│         │   │                         │   │            │
│         │   │  ┌─ ID:88 ─────┐    │   │            │
│         │   │  │  (独立エリア) │    │   │            │
│         │   │  └────────────┘    │   │            │
│         │   └─────────────────────────┘   │            │
│         └───────────────────────────────┘            │
│                                                          │
└──────────────────────────────────────────────────────────┘

※ 上図のポイント:
  - ID:1 エリアと ID:29 エリアは部分的に重複（入れ子ではない）
  - 店舗Aと店舗Bのエリアが一部重複
  - ID:5 は店舗Aと店舗Bの両方に存在 → エンドユーザーが選択
  - ID:88 は店舗B内で独立したエリア（他IDと重複なし）
```

- **エリア重複**: 店舗エリア同士、IDエリア同士が自由に重複可能（入れ子とは限らない）
- **重複パターン**: 完全包含、部分重複、交差、完全独立のいずれもあり得る
- **同一IDの複数店舗存在**: 1つの場所で同じIDが複数の店舗のエリア内に存在する場合がある
- **動的ハイライト**: エンドユーザーの位置選択時、その位置を含むすべてのエリアをハイライト表示
- **マッチング可視化**: エンドユーザー位置が含まれるエリアに対応する有効IDを視覚的に示す

##### 同一ID存在時のエンドユーザー選択（特許準拠）

特許に記載の通り、**1つの場所で同じIDが複数の店舗に存在する場合**は、エンドユーザーが該当店舗を選択する。

- **検索結果が複数**: ID入力後、ユーザー位置を含むエリアに同じIDが複数店舗に存在する場合、複数の商品候補をリスト表示
- **店舗名・距離表示**: 各候補に店舗名とユーザー位置からの概算距離を表示
- **タップで選択**: エンドユーザーが店舗をタップして選択すると、その店舗の商品情報を表示
- **Map連動**: 選択肢表示中、左パネルの地図上で該当店舗のエリアをそれぞれハイライト

##### Google Map操作機能
- ズームイン/ズームアウト
- ドラッグによる地図移動
- 地図タイプ切替（標準/航空写真）
- フルスクリーン表示

#### 6.2.3 右パネル: エンドユーザースマホ画面

スマートフォンの外枠（モックアップフレーム）内にエンドユーザーが実際に操作する画面を表示する。

##### スマホ画面デザイン
- **スマホフレーム**: iPhoneライクなデバイスフレームをCSS/SVGで描画
- **画面サイズ**: 375×667px程度のビューポートを再現
- **スクロール対応**: フレーム内で独立スクロール

##### ID入力画面（初期状態）

ID入力画面は極めてシンプルな構成とする：

- **簡単な説明文**: 「商品に記載された番号を入力してください」等の1-2行の案内テキスト
- **ID入力フィールド**: 大きめの入力欄（数字入力専用、`inputmode="numeric"`）
- **サンプルIDタップ入力**: 画面下部にデモ用のサンプルIDをボタン/チップとして表示し、タップで即入力
  - 3-5個のサンプルIDを表示
  - 「例: 1」「例: 29」「例: 4649」のようにタップ可能なチップ
  - タップすると入力欄に自動入力される
  - 1桁IDには⭐プレミアムバッジを表示
- **検索ボタン**: 「この商品を探す」ボタン
- **現在位置表示**: 左パネルで選択した位置の概要表示（「渋谷区付近」等）

##### 商品表示画面（ID入力後）

ID入力後は架空の商品情報を表示する：

- **商品画像**: カテゴリに応じたプレースホルダー画像
- **商品名**: 架空の商品名
- **価格**: ¥表示
- **商品説明**: 2-3行の架空説明文
- **EC購入ボタン**: 「この商品をオンラインで購入」（ダミーリンク）
- **店舗情報**: この商品を取り扱っている店舗名・住所
- **在庫状況**: 「在庫あり」「残りわずか」等
- **戻るボタン**: ID入力画面に戻る

##### 店舗選択画面（同一ID複数店舗存在時）

エンドユーザーが入力したIDが、現在位置を含む複数の店舗エリアに存在する場合、以下の選択画面を表示する：

- **「複数の店舗が見つかりました」メッセージ**
- **店舗候補リスト**: 各店舗の名前・カテゴリ・概算距離を表示
- **タップで選択**: 店舗をタップするとその店舗の商品表示画面へ遷移
- **左パネル連動**: 選択肢の各店舗エリアを地図上でハイライト

##### スマホ画面とMapの連動
- 左パネルでエンドユーザー位置を変更すると、右パネルの「現在位置」表示も連動更新
- 右パネルでID入力・検索すると、左パネルの該当エリアがハイライト
- 検索結果に合致するエリアが左パネルでフォーカス表示

#### 6.2.4 デモパターン情報バー

画面上部にデモパターンの設定情報を表示するコンパクトなバーを配置：
- パターン名
- 利用用途 / エリア規模 / ID桁数 / 導入企業規模
- 他パターンへの切替ドロップダウン
- トップページへの戻りリンク

### 6.3 Webスライド

#### 6.3.1 スライド構成

| No. | タイトル | 内容 |
|-----|---------|------|
| 1 | タイトル | システム名称、特許情報 |
| 2 | 課題 | ショールーミング問題、O2Oの断絶 |
| 3 | 解決策 | ロケーションコードによる商品情報提示 |
| 4 | システム構成 | ユーザ端末、サーバ、店舗端末の関係図 |
| 5 | 技術的特徴 | 位置情報×短縮コードの組み合わせ |
| 6 | 処理フロー | ユーザ操作から商品情報表示までの流れ |
| 7 | デモンストレーション | デモ画面のスクリーンショット・リンク |
| 8 | 活用シーン1 | 小売業（アパレル） |
| 9 | 活用シーン2 | 家電量販店 |
| 10 | 活用シーン3 | コンビニエンスストア |
| 11 | 導入効果 | 定量的な効果指標 |
| 12 | ターゲット企業 | 活用価値のある企業カテゴリ |
| 13 | 特許情報 | 特許範囲、ライセンス情報 |
| 14 | 競合優位性 | 既存技術との比較 |
| 15 | ロードマップ | 今後の展開計画 |
| 16 | まとめ・CTA | お問い合わせ先、次のアクション |

---

## 7. デモパターン一覧（30パターン）

各デモパターンは「利用用途」「エリア規模」「ID桁数」「導入企業規模」の4軸で構成する。

> **ID形式**: デモではIDは**数字のみ**とする。**1桁から利用可能**とし、人間が覚えられる桁数（最大8桁程度）までとする。

### 7.1 パターン定義

| # | パターンID | 利用用途 | エリア規模 | ID桁数 | 導入企業規模 | 概要 |
|---|-----------|---------|-----------|--------|------------|------|
| 1 | CVS-S-1-SM | コンビニ | 小（単店舗） | 1桁 | 中小企業 | ⭐プレミアム1桁ID・個人経営コンビニ |
| 2 | CVS-L-4-LG | コンビニ | 大（全国チェーン） | 4桁 | 大企業 | 語呂合わせ活用・全国コンビニチェーン |
| 3 | APR-S-2-SM | アパレル | 小（単店舗） | 2桁 | 中小企業 | セレクトショップの試着→EC連携 |
| 4 | APR-M-4-MD | アパレル | 中（地域チェーン） | 4桁 | 中堅企業 | 語呂合わせ活用・地域アパレル |
| 5 | APR-L-6-LG | アパレル | 大（全国チェーン） | 6桁 | 大企業 | ファストファッション全国チェーン |
| 6 | ELC-M-4-LG | 家電量販 | 中（地域チェーン） | 4桁 | 大企業 | 語呂合わせ活用・家電量販店 |
| 7 | ELC-L-6-LG | 家電量販 | 大（全国チェーン） | 6桁 | 大企業 | 家電量販全国チェーン |
| 8 | BKS-S-2-SM | 書店 | 小（単店舗） | 2桁 | 中小企業 | 独立系書店の在庫補完EC連携 |
| 9 | BKS-L-6-LG | 書店 | 大（全国チェーン） | 6桁 | 大企業 | 大手書店チェーンの電子書籍連携 |
| 10 | HMC-M-4-MD | ホームセンター | 中（地域チェーン） | 4桁 | 中堅企業 | 地域ホームセンターの大型商品EC |
| 11 | SPM-L-6-LG | スーパーマーケット | 大（全国チェーン） | 6桁 | 大企業 | ネットスーパー連携まとめ買い促進 |
| 12 | DRG-M-4-MD | ドラッグストア | 中（地域チェーン） | 4桁 | 中堅企業 | 語呂合わせ活用・ドラッグストア |
| 13 | DRG-L-6-LG | ドラッグストア | 大（全国チェーン） | 6桁 | 大企業 | 全国ドラッグストアのヘルスケアEC |
| 14 | RES-S-1-SM | 飲食店 | 小（単店舗） | 1桁 | 小規模 | ⭐プレミアム1桁ID・個人飲食店 |
| 15 | RES-L-4-LG | 飲食チェーン | 大（全国チェーン） | 4桁 | 大企業 | 語呂合わせ活用・飲食チェーン |
| 16 | REA-M-5-LG | 不動産 | 中（地域展開） | 5桁 | 大企業 | モデルルーム→オンライン相談連携 |
| 17 | CAR-M-5-LG | 自動車ディーラー | 中（地域展開） | 5桁 | 大企業 | 試乗→オンライン見積連携 |
| 18 | DEP-L-4-LG | 百貨店 | 大（全国チェーン） | 4桁 | 大企業 | 語呂合わせ活用・百貨店高級品 |
| 19 | SPT-M-3-MD | スポーツ用品 | 中（地域チェーン） | 3桁 | 中堅企業 | スポーツ用品の試用→EC購入 |
| 20 | COS-L-6-LG | 化粧品 | 大（全国チェーン） | 6桁 | 大企業 | カウンセリング→定期購入EC |
| 21 | TRV-M-4-MD | 旅行代理店 | 中（地域展開） | 4桁 | 中堅企業 | 語呂合わせ活用・旅行代理店 |
| 22 | BNK-L-5-LG | 銀行・金融 | 大（全国展開） | 5桁 | 大企業 | 窓口→オンライン申込 |
| 23 | LOG-L-7-LG | 物流 | 大（全国展開） | 7桁 | 大企業 | 宅配ロッカー×EC連携 |
| 24 | AGR-S-1-SM | 農産物直売所 | 小（単拠点） | 1桁 | 小規模 | ⭐プレミアム1桁ID・地方特産品 |
| 25 | EXB-M-3-MD | 展示会・イベント | 中（会場規模） | 3桁 | 中堅企業 | 展示品→EC即時購入 |
| 26 | MUS-S-2-SM | 美術館・博物館 | 小（単館） | 2桁 | 小規模 | ミュージアムショップEC連携 |
| 27 | THP-L-6-LG | テーマパーク | 大（大規模施設） | 6桁 | 大企業 | パーク内グッズEC購入・配送 |
| 28 | DFS-L-8-GL | 免税店 | 大（国際展開） | 8桁 | グローバル | インバウンド客EC再購入促進 |
| 29 | B2B-L-8-LG | BtoB卸売 | 大（全国展開） | 8桁 | 大企業 | 現場確認→オンライン発注 |
| 30 | PFM-L-7-GL | プラットフォーム | 大（全国展開） | 7桁 | グローバル | マルチテナント型プラットフォーム |

### 7.2 パターン構成要素の詳細

#### エリア規模

| コード | 名称 | 店舗数目安 | 商品数目安 |
|--------|------|-----------|-----------|
| S | 小規模（単店舗） | 1-3店舗 | 50-500商品 |
| M | 中規模（地域チェーン） | 10-50店舗 | 1,000-10,000商品 |
| L | 大規模（全国チェーン） | 100-10,000店舗 | 10,000-100,000商品 |

#### ID形式仕様

デモではIDは**数字のみ**とする。人間が覚えられる桁数（最大8桁）までとし、**1桁から利用可能**とする。

| 桁数 | 表現可能数 | 適用規模 | 形式例 | 特徴 |
|------|-----------|---------|--------|------|
| 1桁 | 10 | 極小規模・限定品 | `1`, `7` | ⭐ **プレミアムID**（希少価値が極めて高い） |
| 2桁 | 100 | 小規模店舗 | `29`, `88` | 覚えやすい・プレミアム寄り |
| 3桁 | 1,000 | 小〜中規模 | `108`, `893` | 語呂合わせ活用可能 |
| 4桁 | 10,000 | 中規模チェーン | `4649`, `1129` | ★ **語呂合わせ最適桁数** |
| 5桁 | 100,000 | 中〜大規模 | `31415`, `11451` | 電話番号感覚 |
| 6桁 | 1,000,000 | 大規模チェーン | `428039`, `100893` | 十分な商品数をカバー |
| 7桁 | 10,000,000 | 全国規模 | `4510810` | 人間が覚えられる上限付近 |
| 8桁 | 100,000,000 | 全国・国際 | `10483927` | 人間が覚えられる最大桁数 |

#### 語呂合わせによるID活用

数字IDは**語呂合わせ**を活用することで、覚えやすく、ブランディングや販促に活かせる。この点をデモで積極的にアピールする。

| 語呂合わせID | 読み | 活用例 | 桁数 |
|------------|------|---------|------|
| `4649` | よろしく | 挨拶・ウェルカム商品 | 4桁 |
| `1129` | いい肉 | 精肉店・焼肉店 | 4桁 |
| `3150` | 最高 | プレミアム商品 | 4桁 |
| `2951` | 福来 | 縁起商品 | 4桁 |
| `710` | 納豆 | 食品スーパー | 3桁 |
| `39` | サンキュー | お礼・感謝商品 | 2桁 |
| `84` | ハシ | カトラリー・キッチン用品 | 2桁 |
| `5` | ゴ | プレミアムランチセット | 1桁 |

> デモのサンプルIDには語呂合わせを活用したIDを含め、「覚えやすい」「販促に使える」ことを視覚的にアピールする。

#### IDプレミアム価値

**1桁ID（0-9）**は世界でたった10個しか存在しないため、**極めて高いプレミアム価値**を持つ。デモでは以下のように表現する：

| 表現方法 | 詳細 |
|---------|------|
| ⭐ バッジ表示 | 1桁IDのサンプルチップに「⭐ プレミアム」バッジを付与 |
| 金色デザイン | 1桁IDの商品表示画面に金色のプレミアムアクセント |
| 希少性表示 | 「全世界で10番号のみ」等の希少性を明示 |
| 価格プレミアム | 1桁ID商品は通常より高価格帯で設定 |

#### エリア広さのプレミアム価値

**広大な多角形エリア**を持つIDは、より広い範囲のユーザーにリーチできるためプレミアム価値がある。デモでは以下のように表現する：

| 表現方法 | 詳細 |
|---------|------|
| エリア面積表示 | 各エリアのポップアップに「カバー範囲: 約XX km²」を表示 |
| プレミアムアイコン | 広域エリアには🌟マークを付与 |
| 推定リーチ数 | 「推定リーチ: 約XX万人」等の表示 |
| 対比表示 | 同じ店舗内の他IDエリアと面積を比較するバーグラフ |

#### 導入企業規模

| コード | 名称 | 従業員数目安 | 年商目安 |
|--------|------|-------------|---------|
| SM | 小規模 | 1-50人 | ～5億円 |
| MD | 中堅企業 | 50-300人 | 5-50億円 |
| LG | 大企業 | 300-10,000人 | 50-5,000億円 |
| GL | グローバル企業 | 10,000人～ | 5,000億円～ |

---

## 8. 画面設計

### 8.1 ページ構成

```
location-code/
├── / (トップページ)
│   ├── #summary (特許技術の要約)
│   ├── #features (機能アピール)
│   ├── #effects (導入効果)
│   ├── #patent-scope (特許範囲)
│   ├── #demos (デモ一覧)
│   ├── #target-companies (対象企業)
│   └── #slides-link (スライドリンク)
├── /demo/:patternId (デモ画面 - 2パネル構成)
│   ├── 左パネル: Google Mapビュー
│   │   ├── エンドユーザー位置選択
│   │   ├── 多角形エリア多層表示
│   │   └── レイヤー表示切替
│   └── 右パネル: エンドユーザースマホ画面
│       ├── ID入力画面
│       └── 架空商品表示画面
└── /slides (Webスライド)
    └── スライド1-16
```

### 8.2 デモ画面のワイヤーフレーム（PC/タブレット: 横並び2パネル）

デモ画面はPC/タブレットでの閲覧を推奨する。以下は推奨レイアウト：

```
┌──────────────────────────────────────────────────────────────────────────┐
│  ロケーションコード デモ - [パターン名]                                    │
│  [用途] / [エリア] / [ID桁数] / [規模]  [パターン切替▼] [← トップへ]     │
├────────────────────────────────┬─────────────────────────────────────────┤
│                                │              ┌─────────┐               │
│   🗺️ Google Map ビュー         │              │ 📱      │               │
│                                │              │         │               │
│   ┌────────────────────────┐   │              │ 商品IDを │               │
│   │         [地図]         │   │              │ 入力して │               │
│   │                        │   │              │ ください │               │
│   │   ┌──── 店舗A ────┐   │   │              │         │               │
│   │   │  ┌─ A001 ─┐  │   │   │              │ ┌─────┐ │               │
│   │   │  │ A002   │  │   │   │              │ │     │ │               │
│   │   │  └────────┘  │   │   │              │ └─────┘ │               │
│   │   └───────────────┘   │   │              │ [検索]  │               │
│   │                        │   │              │         │               │
│   │   ┌──── 店舗B ────┐   │   │              │ サンプル: │              │
│   │   │  B001  B002   │   │   │              │ [A001]  │               │
│   │   └───────────────┘   │   │              │ [B002]  │               │
│   │                        │   │              │ [C003]  │               │
│   │    📍 ← ユーザー位置   │   │              │         │               │
│   │                        │   │              │         │               │
│   └────────────────────────┘   │              └─────────┘               │
│                                │                                         │
│   凡例:                        │   位置: 渋谷区付近                      │
│   🟥 店舗A  🟦 店舗B  🟩 店舗C │   マッチ: 店舗A内のID有効             │
│   ☑ 店舗A ☑ 店舗B ☐ 店舗C     │                                         │
│                                │                                         │
├────────────────────────────────┴─────────────────────────────────────────┤
│  60%                            40%                                      │
└──────────────────────────────────────────────────────────────────────────┘
```

### 8.3 スマホ画面ワイヤーフレーム（ID入力画面）

```
┌─────────────────────┐
│ ─── ○              │  ← スマホフレーム（iPhoneライク）
├─────────────────────┤
│                     │
│  🏪 [店舗名]付近    │  ← 左パネルで選択した位置
│                     │
│  商品に記載された    │
│  IDを入力して       │
│  ください           │
│                     │
│  ┌───────────────┐  │
│  │  A 0 0 1      │  │  ← 大きめ入力フィールド
│  └───────────────┘  │
│                     │
│  [🔍 この商品を探す] │  ← 検索ボタン
│                     │
│  ── サンプルID ──   │
│                     │
│  [A001] [A002]      │  ← タップで即入力
│  [B001] [B002]      │
│  [C001]             │
│                     │
│  ※タップでIDが      │
│   自動入力されます   │
│                     │
└─────────────────────┘
```

### 8.4 スマホ画面ワイヤーフレーム（商品表示画面）

```
┌─────────────────────┐
│ ─── ○              │
├─────────────────────┤
│ [← 戻る]           │
│                     │
│  ┌───────────────┐  │
│  │               │  │
│  │   📷 商品画像  │  │  ← カテゴリ別プレースホルダー
│  │               │  │
│  └───────────────┘  │
│                     │
│  架空商品名XXXXX    │  ← 架空商品名
│                     │
│  ¥3,980（税込）     │  ← 価格
│                     │
│  この商品は〇〇で   │
│  △△な特徴を持つ    │  ← 架空説明文（2-3行）
│  便利な商品です。    │
│                     │
│  🏪 取扱店舗:       │
│  ○○店（渋谷区）    │  ← 店舗情報
│                     │
│  📦 在庫: 在庫あり  │  ← 在庫状況
│                     │
│  [🛒 オンラインで    │
│      購入する]      │  ← ダミーECリンク
│                     │
└─────────────────────┘
```

### 8.5 左右パネル連動仕様

```
操作フロー:

左パネル(Map)                        右パネル(スマホ)
─────────────                        ─────────────────
① マップクリック ──────────────────▶ 現在位置表示が更新
   (ユーザー位置選択)                 「渋谷区付近」
                                      │
② 該当エリアハイライト                 │
   (位置を含む多角形が光る)            │
                                      │
                    ◀──────────────── ③ サンプルIDタップ
④ 該当IDのエリアが                     「A001」を入力
   さらにハイライト                    │
                                      │
                    ◀──────────────── ⑤ [検索]タップ
⑥ マッチしたエリアに                   架空商品を表示
   フォーカス＆ズーム
```

### 8.6 デモ画面のワイヤーフレーム（スマートフォン: 縦レイアウト）

スマートフォン（画面幅767px以下）では、2パネルを縦に積み上げたレイアウトに自動切替する。

```
┌────────────────────────────────────┐
│ ⚠ PC/タブレットでの閲覧を推奨     │  ← 推奨バナー（×で非表示可）
├────────────────────────────────────┤
│ デモ - [パターン名]    [≡メニュー] │
│ [用途] / [エリア] / [ID桁数]       │
├────────────────────────────────────┤
│                                    │
│   🗺️ Google Map ビュー             │  ← 上部: 画面の40%（最小200px）
│                                    │
│   ┌──────────────────────────┐     │
│   │         [地図]           │     │
│   │                          │     │
│   │   ┌── 店舗A ──┐         │     │
│   │   │  A001     │         │     │
│   │   └───────────┘         │     │
│   │                          │     │
│   │    📍 ← タップで位置選択 │     │
│   │                          │     │
│   └──────────────────────────┘     │
│   凡例 [▼展開]                     │  ← 折りたたみ式凡例
│                                    │
├────────────────────────────────────┤
│                                    │
│   エンドユーザー操作画面            │  ← 下部: 画面の60%
│   (スマホフレーム装飾なし)          │     実機なのでフレーム不要
│                                    │
│   🏪 [店舗名]付近                  │
│                                    │
│   商品に記載されたIDを              │
│   入力してください                  │
│                                    │
│   ┌──────────────────────────┐     │
│   │  A 0 0 1                │     │  ← 大きめ入力フィールド
│   └──────────────────────────┘     │
│                                    │
│   [🔍 この商品を探す]              │  ← 検索ボタン（幅100%）
│                                    │
│   ── サンプルID ──                 │
│   [A001] [A002] [B001]             │  ← タップで即入力
│   [B002] [C001]                    │
│                                    │
└────────────────────────────────────┘
```

##### スマートフォン縦レイアウトの商品表示画面

```
┌────────────────────────────────────┐
│ デモ - [パターン名]    [≡メニュー] │
├────────────────────────────────────┤
│                                    │
│   🗺️ Google Map ビュー             │  ← 上部（マッチエリアにズーム）
│   ┌──────────────────────────┐     │
│   │  ✨ マッチしたエリア      │     │
│   │     ハイライト表示        │     │
│   └──────────────────────────┘     │
│                                    │
├────────────────────────────────────┤
│                                    │
│   [← 戻る]                        │
│                                    │
│   ┌──────────────────────────┐     │
│   │      📷 商品画像         │     │
│   └──────────────────────────┘     │
│                                    │
│   架空商品名XXXXX                  │
│   ¥3,980（税込）                   │
│                                    │
│   この商品は〇〇で△△な            │
│   特徴を持つ便利な商品です。        │
│                                    │
│   🏪 取扱店舗: ○○店（渋谷区）     │
│   📦 在庫: 在庫あり                │
│                                    │
│   [🛒 オンラインで購入する]        │  ← 幅100%ボタン
│                                    │
└────────────────────────────────────┘
```

##### PC/タブレットとスマートフォンの差異一覧

| 項目 | PC/タブレット | スマートフォン |
|------|-------------|--------------|
| パネル配置 | 横並び（左Map / 右スマホ画面） | 縦積み（上Map / 下操作画面） |
| スマホフレーム装飾 | あり（iPhoneライクなフレーム） | なし（実機閲覧のため不要） |
| 凡例表示 | 常時表示 | 折りたたみ式 |
| Map高さ | パネル全体の高さ | 画面の40%（最小200px） |
| 操作画面高さ | パネル全体の高さ | 画面の60% |
| 推奨バナー | 非表示 | 表示（非表示ボタンあり） |
| パネル連動 | 同時に見える | スクロールで切替 |

---

## 9. データ設計

### 9.1 ハードコーディングデータ構造

データベースは使用せず、TypeScriptの定数としてハードコーディングする。

```typescript
// 型定義

/** 緯度経度座標 */
interface LatLng {
  lat: number;
  lng: number;
}

/** 多角形エリア定義（位置情報多角形） */
interface PolygonArea {
  id: string;                    // エリアID
  storeId: string;               // 所属店舗ID
  productId: string;             // 対応する商品ID（数字のみ）
  vertices: LatLng[];            // 多角形の頂点座標（時計回り）
  color: string;                 // 表示色（16進数）
  opacity: number;               // 透明度（0.0-1.0）
  label: string;                 // 凡例ラベル
  areaSize?: number;             // エリア面積（km²）※プレミアム判定用
  isPremiumArea?: boolean;       // 広域プレミアムエリアか
}

/** 店舗情報 */
interface Store {
  id: string;
  name: string;
  address: string;
  latitude: number;
  longitude: number;
  category: string;
  baseColor: string;             // 店舗のベース色
  polygonAreas: PolygonArea[];   // この店舗の多角形エリア群（多層）
}

/** 架空商品情報 */
interface Product {
  productId: string;             // ロケーションコード（数字のみ）
  name: string;                  // 架空商品名
  price: number;                 // 価格
  description: string;           // 架空説明文（2-3行）
  imageUrl: string;              // プレースホルダー画像URL
  ecUrl: string;                 // ダミーEC購入リンク
  stock: 'available' | 'few' | 'none';  // 在庫状況
  category: string;              // 商品カテゴリ
  isPremiumId?: boolean;         // 1桁プレミアムIDか
  goroawase?: string;            // 語呂合わせ読み（例: "よろしく"）
}

/** 店舗別商品リスト */
interface StoreProductList {
  storeId: string;
  products: Product[];
}

/** Google Map初期設定 */
interface MapConfig {
  center: LatLng;                // 地図の初期中心座標
  zoom: number;                  // 初期ズームレベル
  mapTypeId: 'roadmap' | 'satellite' | 'hybrid' | 'terrain';
}

/** デモパターン定義 */
interface DemoPattern {
  patternId: string;
  name: string;
  useCase: string;               // 利用用途
  areaScale: string;             // エリア規模
  idDigits: number;              // ID桁数（1-8）
  companyScale: string;          // 導入企業規模
  description: string;
  mapConfig: MapConfig;          // Google Map初期設定
  stores: Store[];               // 店舗データ（多角形エリア含む）
  productLists: StoreProductList[];  // 商品データ
  sampleIds: string[];           // スマホ画面に表示するサンプルID（3-5個、数字のみ）
  hasDuplicateIds: boolean;      // 同一ID複数店舗存在デモを含むか
}
```

### 9.2 多角形エリアデータ設計

多角形エリアは各店舗の各商品IDに対応し、**重層的に重複する構造**でマップ上に描画される。入れ子構造とは限らず、交差・部分重複・独立があり得る。

#### 重層的重複構造の定義

```typescript
// 例: コンビニパターンの店舗Aの多角形エリア定義
// ※ IDは全て数字のみ、エリアは入れ子ではなく重複・交差する構造
const storeA_polygons: PolygonArea[] = [
  {
    id: 'storeA-area-1',
    storeId: 'storeA',
    productId: '1',              // ⭐ プレミアム1桁ID
    vertices: [
      { lat: 35.6600, lng: 139.6990 },
      { lat: 35.6600, lng: 139.7020 },
      { lat: 35.6580, lng: 139.7020 },
      { lat: 35.6580, lng: 139.6990 },
    ],
    color: '#FF0000',
    opacity: 0.2,
    label: '⭐ ID:1 広域プレミアムエリア',
    areaSize: 0.06,
    isPremiumArea: true,
  },
  {
    id: 'storeA-area-29',
    storeId: 'storeA',
    productId: '29',             // 「にく」語呂合わせ
    vertices: [
      { lat: 35.6598, lng: 139.6995 },
      { lat: 35.6598, lng: 139.7015 },
      { lat: 35.6585, lng: 139.7015 },
      { lat: 35.6585, lng: 139.6995 },
    ],
    color: '#FF0000',
    opacity: 0.35,
    label: 'ID:29 エリア',
  },
  {
    id: 'storeA-area-4649',
    storeId: 'storeA',
    productId: '4649',           // 「よろしく」語呂合わせ
    vertices: [                  // ID:29のエリアと部分重複（入れ子ではない）
      { lat: 35.6595, lng: 139.7005 },
      { lat: 35.6595, lng: 139.7025 },
      { lat: 35.6582, lng: 139.7025 },
      { lat: 35.6582, lng: 139.7005 },
    ],
    color: '#FF0000',
    opacity: 0.5,
    label: 'ID:4649 エリア',
  },
];

// 店舗BにもID:29が存在 → 同一ID複数店舗のデモ
const storeB_polygons: PolygonArea[] = [
  {
    id: 'storeB-area-29',
    storeId: 'storeB',
    productId: '29',             // 店舗Aと同じIDが店舗Bにも存在
    vertices: [
      { lat: 35.6590, lng: 139.7010 },
      { lat: 35.6590, lng: 139.7030 },
      { lat: 35.6575, lng: 139.7030 },
      { lat: 35.6575, lng: 139.7010 },
    ],
    color: '#0000FF',
    opacity: 0.35,
    label: 'ID:29 エリア（店舗B）',
  },
  // ... 店舗Aと店舗BのID:29エリアが重複する箇所あり
];
```

#### 色設計ルール

| 店舗 | ベース色 | 広域エリア | 中域エリア | 狭域エリア | 備考 |
|------|---------|-----------|-----------|-----------|------|
| 店舗A | #FF0000 (赤) | opacity: 0.2 | opacity: 0.35 | opacity: 0.5 | 重複部分はopacity加算 |
| 店舗B | #0000FF (青) | opacity: 0.2 | opacity: 0.35 | opacity: 0.5 | 重複部分はopacity加算 |
| 店舗C | #00AA00 (緑) | opacity: 0.2 | opacity: 0.35 | opacity: 0.5 | 重複部分はopacity加算 |
| 店舗D | #FF8800 (橙) | opacity: 0.2 | opacity: 0.35 | opacity: 0.5 | 重複部分はopacity加算 |
| 店舗E | #8800FF (紫) | opacity: 0.2 | opacity: 0.35 | opacity: 0.5 | 重複部分はopacity加算 |

※ エリアは入れ子構造ではなく自由に重複するため、重複箇所はopacityが視覚的に加算される

### 9.3 デモデータ要件

各パターンにつき以下のデモデータを用意する：

- **店舗数**: 2-5店舗（パターンの規模に応じて）
- **多角形エリア数**: 各店舗につき3-8個の多角形エリア（ID数に対応）
- **商品数**: 各店舗につき5-10商品（すべて架空商品）
- **ID形式**: 数字のみ（1桁〜8桁）
- **1桁プレミアムID**: 1桁IDパターンでは⭐バッジ付きプレミアム商品を含む
- **語呂合わせID**: 各パターンのサンプルIDに語呂合わせを含める
- **商品カテゴリ**: パターンの用途に応じた適切なカテゴリ
- **価格帯**: パターンの用途に応じた現実的な価格（1桁ID商品は高価格帯）
- **商品画像**: プレースホルダー画像（カテゴリに応じたアイコン）
- **サンプルID**: 各パターンにつき3-5個のサンプルID（スマホ画面タップ入力用）
- **多角形頂点**: 各エリアにつき4-8頂点の座標データ
- **エリア重複**: 最低1箇所は店舗エリア同士が重複するように設計
- **同一ID重複**: 最低1パターンは同一IDが複数店舗に存在するデモを含む
- **部分重複エリア**: 同一店舗内で入れ子ではなく交差・部分重複するIDエリアを含む

---

## 10. プロジェクト構成

### 10.1 ディレクトリ構成

```
location-code/
├── docs/
│   ├── requirements.md          # 本要件定義書
│   └── deploy.md                # デプロイ手順書
├── public/
│   ├── favicon.ico
│   └── assets/
│       └── images/              # デモ用画像
├── src/
│   ├── main.tsx                 # エントリーポイント
│   ├── App.tsx                  # ルーティング
│   ├── index.css                # グローバルスタイル
│   ├── components/
│   │   ├── layout/
│   │   │   ├── Header.tsx       # ヘッダー
│   │   │   ├── Footer.tsx       # フッター
│   │   │   └── Navigation.tsx   # ナビゲーション
│   │   ├── top/
│   │   │   ├── HeroSection.tsx         # ヒーロー
│   │   │   ├── PatentSummary.tsx        # 特許要約
│   │   │   ├── FeatureAppeal.tsx        # 機能アピール
│   │   │   ├── EffectsSection.tsx       # 導入効果
│   │   │   ├── PatentScope.tsx          # 特許範囲
│   │   │   ├── DemoPatternList.tsx      # デモ一覧
│   │   │   ├── TargetCompanies.tsx      # 対象企業
│   │   │   └── SlideLink.tsx            # スライドリンク
│   │   ├── demo/
│   │   │   ├── DemoLayout.tsx           # 2パネルレイアウト
│   │   │   ├── GoogleMapPanel.tsx       # 左パネル: Google Map
│   │   │   ├── PolygonLayer.tsx         # 多角形エリア描画
│   │   │   ├── PolygonLegend.tsx        # 凡例・表示切替
│   │   │   ├── UserLocationMarker.tsx   # ユーザー位置マーカー
│   │   │   ├── SmartphoneFrame.tsx      # 右パネル: スマホフレーム
│   │   │   ├── IdInputScreen.tsx        # スマホ: ID入力画面
│   │   │   ├── ProductResultScreen.tsx  # スマホ: 架空商品表示画面
│   │   │   ├── StoreSelectionScreen.tsx # スマホ: 同一ID複数店舗選択画面
│   │   │   ├── SampleIdChips.tsx        # サンプルIDタップチップ
│   │   │   ├── PatternInfoBar.tsx       # パターン情報バー
│   │   │   └── AreaHighlighter.tsx      # エリアハイライト制御
│   │   └── slides/
│   │       ├── SlideDeck.tsx            # スライドメイン
│   │       └── slides/                  # 各スライド
│   │           ├── TitleSlide.tsx
│   │           ├── ProblemSlide.tsx
│   │           ├── SolutionSlide.tsx
│   │           └── ...
│   ├── data/
│   │   ├── demoPatterns.ts       # 30パターン定義
│   │   ├── stores.ts             # 店舗データ（多角形エリア含む）
│   │   ├── products.ts           # 架空商品データ
│   │   ├── polygonAreas.ts       # 多角形エリア座標データ
│   │   └── patentInfo.ts         # 特許情報
│   ├── types/
│   │   └── index.ts              # 型定義（PolygonArea等含む）
│   ├── hooks/
│   │   ├── useProductSearch.ts   # 検索ロジック
│   │   ├── useGoogleMap.ts       # Google Map制御
│   │   ├── usePolygonMatch.ts    # 多角形内判定ロジック
│   │   └── useUserLocation.ts    # ユーザー位置管理
│   ├── utils/
│   │   ├── locationCode.ts       # ロケーションコード生成
│   │   ├── polygonUtils.ts       # 多角形計算（点の内包判定等）
│   │   └── mapStyles.ts          # Google Map スタイル定義
│   └── pages/
│       ├── TopPage.tsx            # トップページ
│       ├── DemoPage.tsx           # デモページ（2パネル構成）
│       └── SlidePage.tsx          # スライドページ
├── .firebaserc                    # Firebase設定
├── firebase.json                  # Firebase設定
├── package.json
├── tsconfig.json
├── vite.config.ts
└── index.html
```

---

## 11. デプロイ要件

### 11.1 Firebase Hosting設定

- **プロジェクト**: Firebase CLIで新規プロジェクト作成
- **ホスティング**: Single Page Application（SPA）設定
- **リダイレクト**: すべてのパスを `/index.html` にリダイレクト
- **キャッシュ**: 静的アセットのキャッシュ設定

### 11.2 GCP（Google Cloud Platform）セットアップ

Google Maps JavaScript APIを利用するためのGCPセットアップ手順を`docs/deploy.md`に記述する。以下の内容を含む：

#### 11.2.1 GCPプロジェクト作成

1. [Google Cloud Console](https://console.cloud.google.com/) にアクセス
2. 新規プロジェクトを作成（例: `location-code-demo`）
3. 課金アカウントをリンク（月$200の無料クレジットあり）

#### 11.2.2 APIの有効化

以下のAPIを有効化する：

| API | 用途 | 必須 |
|-----|------|------|
| **Maps JavaScript API** | 地図表示・多角形描画・マーカー表示 | ✅ 必須 |
| **Geocoding API** | 座標から住所文字列への変換（「渋谷区付近」表示） | 任意 |

#### 11.2.3 APIキーの発行と制限

1. **「認証情報」 → 「認証情報を作成」**でAPIキーを発行
2. **アプリケーションの制限**を設定：
   - 種類: **HTTPリファラー**
   - 許可するリファラー:
     - `https://your-project.web.app/*`（Firebase Hostingドメイン）
     - `https://your-project.firebaseapp.com/*`（Firebase Hostingドメイン）
     - `http://localhost:*`（ローカル開発用）
3. **APIの制限**を設定:
   - Maps JavaScript API のみに制限（またはGeocodeも許可）

#### 11.2.4 環境変数の設定

```bash
# プロジェクトルートに .env ファイルを作成
VITE_GOOGLE_MAPS_API_KEY=AIzaSy...あなたのAPIキー...
```

- `.env` は `.gitignore` に追加し、リポジトリにコミットしない
- テンプレートとして `.env.example` を用意する
- Viteの環境変数は `VITE_` プレフィックスが必要

#### 11.2.5 費用管理

| 項目 | 詳細 |
|------|------|
| 無料クレジット | 月$200（Maps JavaScript API は約 28,000 ロード/月まで無料） |
| 予算アラート | GCPの「予算とアラート」で上限を設定推奨 |
| コスト削減 | デモ用途なので無料枠内に十分収まる想定 |

### 11.3 Firebaseセットアップ

1. [Firebase Console](https://console.firebase.google.com/) でプロジェクト作成（GCPプロジェクトと同じものを使用可）
2. Firebase CLIインストール: `npm install -g firebase-tools`
3. ログイン: `firebase login`
4. プロジェクト初期化: `firebase init hosting`
   - パブリックディレクトリ: `dist`
   - SPA設定: `Yes`
   - GitHub Actions自動デプロイ: 任意

### 11.4 デプロイフロー

```
1. GCPプロジェクト作成・API有効化
2. Maps JavaScript APIキー発行・リファラー制限設定
3. Firebase CLIインストール・ログイン
4. Firebaseプロジェクト初期化（firebase init hosting）
5. 環境変数設定（.env にAPIキー）
6. 依存パッケージインストール（npm install）
7. ビルド（npm run build）
8. デプロイ（firebase deploy --only hosting）
9. Google Maps APIキーのリファラー制限にデプロイURLを追加
10. 動作確認
```

詳細な手順は `docs/deploy.md` にスクリーンショット付きで記述する。

---

## 12. Webスライド要件

### 12.1 スライドエンジン

- ブラウザ内で完結するHTML/CSS/JSベースのスライド
- キーボードナビゲーション（←→キー）
- フルスクリーン対応
- レスポンシブ対応

### 12.2 スライドデザイン

- プロフェッショナルなデザイン
- 特許技術のビジュアル説明
- アニメーション効果（適度に）
- 印刷対応

---

## 13. 開発スケジュール（概算）

| フェーズ | 期間 | 内容 |
|---------|------|------|
| 設計 | 1-2日 | 詳細設計・データ準備 |
| 基盤実装 | 2-3日 | プロジェクト構築・基本コンポーネント |
| トップページ | 1-2日 | トップページ全セクション |
| デモ機能 | 3-5日 | 30パターンのデモ実装 |
| Webスライド | 1-2日 | 16スライドの実装 |
| テスト・調整 | 1-2日 | ブラウザテスト・レスポンシブ調整 |
| デプロイ | 0.5日 | Firebase Hosting設定・デプロイ |
| ドキュメント | 0.5日 | デプロイ手順書作成 |
| **合計** | **10-17日** | |

---

## 14. 品質基準

### 14.1 コーディング規約

- TypeScript strict mode有効
- ESLint + Prettier設定
- コンポーネント単位の責務分離
- 型安全性の徹底

### 14.2 テスト基準

- 主要コンポーネントの表示確認
- 全30パターンのデモ動作確認
- **デモ画面のPC/タブレット横並び2パネルレイアウト表示確認**（推奨環境）
- **デモ画面のスマートフォン縦レイアウト表示確認**（767px以下でのブレークポイント切替）
- スマートフォン閲覧時の推奨バナー表示・非表示動作確認
- レスポンシブデザインの確認（PC/タブレット/スマートフォン）
- 主要ブラウザでの動作確認

### 14.3 パフォーマンス基準

- Lighthouse Performance Score: 90以上
- First Contentful Paint: 1.5秒以内
- Time to Interactive: 3秒以内

---

## 15. リスクと対策

| リスク | 影響度 | 対策 |
|--------|-------|------|
| 30パターンのデータ量によるバンドルサイズ増大 | 中 | コード分割・遅延読み込み |
| レスポンシブ対応の工数増 | 低 | TailwindCSS等のユーティリティフレームワーク活用 |
| Firebase Hosting無料枠の制限 | 低 | Sparkプラン（無料）の範囲内で設計 |
| Google Maps API利用料金 | 中 | 月$200の無料枠内に収まるよう設計、API呼出し最適化 |
| Google Maps APIキーの漏洩 | 高 | HTTPリファラー制限の設定、本番環境のみのキー使用 |
| 多角形エリアの描画パフォーマンス | 中 | 一度に表示するレイヤー数を制限、ズームレベルに応じた表示制御 |

---

## 16. 用語集

| 用語 | 説明 |
|------|------|
| ロケーションコード | 店舗位置情報と組み合わせて商品を特定するための短縮コード |
| ショールーミング | 実店舗で商品を確認し、ECで購入する消費行動 |
| O2O | Online to Offline / Offline to Online の略。オンラインとオフラインの連携 |
| オムニチャネル | 実店舗、EC、アプリ等の全チャネルを統合した顧客体験 |
| SPA | Single Page Application。ページ遷移なしで動作するWebアプリ |
| Firebase Hosting | Googleが提供する静的Webサイトホスティングサービス |
| J-PlatPat | 特許情報プラットフォーム（日本国特許庁） |
| Polygon（多角形エリア） | Google Maps上に描画する多角形の地理的範囲。店舗の商圏や商品IDの有効エリアを表現 |
| 重層的重複 | 入れ子構造ではなく、自由に交差・部分重複・独立する多角形エリアの配置構造 |
| 語呂合わせ（ゴロアワセ） | 数字の読みを日本語の言葉に見立てること。例: 4649=よろしく, 1129=いい肉 |
| プレミアムID | 1桁の希少なID（0-9）。希少性から高価値というビジネス概念をデモ化 |
| 広域プレミアムエリア | 広範囲をカバーする多角形エリア。広域ほど高価値というビジネス概念をデモ化 |
| 点の内包判定 | ユーザーの位置座標が特定の多角形エリア内に含まれるかを判定するアルゴリズム |
| Google Maps JavaScript API | Google提供の地図表示・操作用API。多角形描画、マーカー表示等に使用 |

---

## 17. 参考情報

- **特許公報**: [J-PlatPat JP-2021-033380](https://www.j-platpat.inpit.go.jp/c1801/PU/JP-2021-033380/11/ja)
- **Google Patents**: [JP2021033380A](https://patents.google.com/patent/JP2021033380A/ja)
- **PCT国際出願**: PCT/JP2020/030880
- **Firebase Hosting**: [公式ドキュメント](https://firebase.google.com/docs/hosting)
- **Google Maps JavaScript API**: [公式ドキュメント](https://developers.google.com/maps/documentation/javascript)
- **@react-google-maps/api**: [npm](https://www.npmjs.com/package/@react-google-maps/api)
- **Vite**: [公式ドキュメント](https://vitejs.dev/)
- **React**: [公式ドキュメント](https://react.dev/)

---
